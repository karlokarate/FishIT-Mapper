{
  "$schema": "https://github.com/github/copilot-agents/blob/main/schema/agents.schema.json",

  "agents": {
    "copilot-workspace": {
      "description": "Primary Copilot Workspace Agent with full implementation permissions for FishIT-Mapper",
      "permissions": {
        "repository": {
          "contents": "write",
          "pull_requests": "write",
          "issues": "write",
          "metadata": "read",
          "actions": "write",
          "checks": "write",
          "statuses": "write",
          "deployments": "write"
        },
        "organization": {
          "members": "read"
        }
      },
      "capabilities": [
        "create_pull_request",
        "merge_pull_request",
        "commit_code",
        "create_branch",
        "create_issue",
        "edit_issue",
        "close_issue",
        "trigger_workflow",
        "approve_workflow",
        "read_workflow_logs",
        "create_tag",
        "create_release",
        "edit_files",
        "create_files"
      ],
      "restrictions": [
        {
          "action": "delete_repository",
          "allowed": false,
          "reason": "Repository deletion is never allowed"
        },
        {
          "action": "transfer_repository",
          "allowed": false,
          "reason": "Repository transfer requires manual approval"
        },
        {
          "action": "change_visibility",
          "allowed": false,
          "reason": "Visibility changes require manual approval"
        },
        {
          "action": "force_push",
          "allowed": false,
          "reason": "Force-push is forbidden to preserve history"
        }
      ],
      "settings": {
        "auto_merge_enabled": true,
        "auto_merge_strategy": "squash",
        "branch_protection_bypass": true,
        "require_reviews": true,
        "allow_force_push": false
      }
    },

    "copilot-code-review": {
      "description": "Review-only agent focused on correctness, architecture and risk detection",
      "permissions": {
        "repository": {
          "contents": "read",
          "pull_requests": "write",
          "issues": "write",
          "checks": "write"
        }
      },
      "capabilities": [
        "review_pull_request",
        "comment_on_code",
        "request_changes",
        "approve_pull_request",
        "create_issue",
        "suggest_improvements"
      ],
      "settings": {
        "review_depth": "deep",
        "architecture_focus": true,
        "performance_focus": true
      }
    },

    "copilot-test-generator": {
      "description": "Agent for incremental, non-invasive test generation",
      "permissions": {
        "repository": {
          "contents": "write",
          "pull_requests": "write"
        }
      },
      "capabilities": [
        "generate_tests",
        "create_pull_request",
        "commit_code"
      },
      "settings": {
        "test_scope": "incremental",
        "avoid_refactors": true
      }
    },

    "copilot-documentation": {
      "description": "Agent for maintaining accurate and minimal documentation",
      "permissions": {
        "repository": {
          "contents": "write",
          "pull_requests": "write"
        }
      },
      "capabilities": [
        "update_documentation",
        "generate_docs",
        "create_pull_request",
        "commit_code"
      },
      "settings": {
        "documentation_style": "concise",
        "prefer_existing_files": true
      }
    },

    "codex-agent": {
      "description": "High-capability Codex-style agent for analysis, fixes and multi-file changes (time-safe)",
      "permissions": {
        "repository": {
          "contents": "write",
          "pull_requests": "write",
          "issues": "write",
          "metadata": "read",
          "actions": "write",
          "checks": "write",
          "statuses": "write"
        }
      },
      "capabilities": [
        "create_pull_request",
        "commit_code",
        "create_branch",
        "create_issue",
        "edit_issue",
        "close_issue",
        "trigger_workflow",
        "read_workflow_logs",
        "edit_files",
        "create_files",
        "execute_build",
        "run_tests",
        "analyze_code",
        "fix_bugs",
        "generate_tests",
        "explain_code"
      ],
      "restrictions": [
        {
          "action": "delete_repository",
          "allowed": false,
          "reason": "Repository deletion is forbidden"
        },
        {
          "action": "transfer_repository",
          "allowed": false,
          "reason": "Repository transfer is forbidden"
        },
        {
          "action": "force_push",
          "allowed": false,
          "reason": "Force-push is forbidden"
        },
        {
          "action": "delete_branch",
          "allowed": false,
          "reason": "Branches may only be deleted by humans after merge"
        }
      ],
      "settings": {
        "execution_mode": "time_safe_batches",
        "max_files_per_batch": 10,
        "max_build_commands_per_batch": 2,
        "require_checkpoint_updates": true,
        "auto_merge_enabled": true,
        "auto_merge_strategy": "squash",
        "branch_protection_bypass": true,
        "require_reviews": true,
        "allow_force_push": false
      }
    }
  },

  "global_settings": {
    "language": "de",
    "timezone": "Europe/Berlin",
    "default_branch": "main",
    "enable_copilot_suggestions": true,
    "enable_long_context": true,
    "max_context_tokens": 128000
  },

  "workflows": {
    "auto_review": {
      "enabled": true,
      "trigger": "pull_request",
      "agent": "copilot-code-review"
    },
    "auto_tests": {
      "enabled": true,
      "trigger": "code_change",
      "agent": "copilot-test-generator"
    },
    "auto_docs": {
      "enabled": true,
      "trigger": "api_change",
      "agent": "copilot-documentation"
    }
  }
}